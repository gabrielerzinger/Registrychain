<div class="container-fluid blured">
    <div class="panel panel-body centered">
        <div class="text-center pb-5">
            <h3>Registre-se</h3>
            <small>Leva só um minuto.</small>
        </div>
		<form (ngSubmit)="onSubmit()" #regForm="ngForm" *ngIf="step == 1">
            <div class="form-group row">
                <label for="name" class="col-sm-3 col-form-label">Nome</label>
                <div class="col-sm-9">
                    <input type="text" id="name" name="name" placeholder="Nome" class="form-control" [(ngModel)]="user.name" required>
                </div>
            </div>
            <div class="form-group row">
                <label for="cpf" class="col-sm-3 col-form-label">CPF</label>
                <div class="col-sm-9">
                    <input type="text" id="cpf" name="cpf" placeholder="CPF" class="form-control" [(ngModel)]="user.cpf" required>
                </div>
            </div>
            <div class="form-group row">
                <label for="rg" class="col-sm-3 col-form-label">RG</label>
                <div class="col-sm-9">
                    <input type="text" id="rg" name="rg" placeholder="RG" class="form-control" [(ngModel)]="user.rg" required>
                </div>
            </div>
            <div class="form-group row">
                <label for="email" class="col-sm-3 col-form-label">Email</label>
                <div class="col-sm-9">
                    <input type="text" id="email" name="email" placeholder="Email" class="form-control" [(ngModel)]="user.email" required>
                </div>
            </div>
            <div class="form-group row">
                <label for="address" class="col-sm-3 col-form-label">Endereço</label>
                <div class="col-sm-9">
                    <input type="text" id="address" name="address" placeholder="Endereço" class="form-control" [(ngModel)]="user.address" required>
                </div>
            </div>
            <div class="form-group row">
                <label for="password" class="col-sm-3 col-form-label">Senha</label>
                <div class="col-sm-9">
                    <input type="password" id="password" name="password" placeholder="Senha" class="form-control" [(ngModel)]="password" required>
                </div>
            </div>
            <div class="text-right pt-3">
                <button type="submit" class="btn btn-outline-primary">Registrar</button>
            </div>
		</form>
        <form (ngSubmit)="onSubmit()" #phoneForm="ngForm" *ngIf="step == 2">
            <div class="container">
                Para completar seu cadastro, precisamos verificar seu número de telefone:
            </div>
            <br>
            <div class="form-group row">
                <label for="phone" class="col-sm-3 col-form-label">Telefone</label>
                <div class="col-sm-9">
                    <input type="text" id="phone" name="phone" placeholder="12 98765-4321" class="form-control" [(ngModel)]="user.phone" required>
                </div>
            </div>
            <div class="text-right pt-3">
                <button type="submit" class="btn btn-outline-primary">Confirma</button>
            </div>
		</form>
        <form (ngSubmit)="onSubmit()" #tokenForm="ngForm" *ngIf="step == 3">
            <div class="container">
                Abra o aplicativo Authy em seu telefone e insira o token do RegistryChain:
            </div>
            <br>
            <div class="form-group row">
                <label for="token" class="col-sm-3 col-form-label">Token</label>
                <div class="col-sm-9">
                    <input type="text" id="token" name="token" placeholder="Authy Token" class="form-control" [(ngModel)]="token" required>
                </div>
            </div>
            <div class="text-right pt-3">
                <button type="submit" class="btn btn-outline-primary">Confirma</button>
            </div>
            <div class="container pt-5 text-center">
                <h5>Instale o Authy</h5>
                <div class="row">
                    <div class="col-6">
                        <a class="text-right" target="_blank" href='https://play.google.com/store/apps/details?id=com.authy.authy&pcampaignid=MKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1'>
                            <img alt='Authy no Google Play' style="width: 200px" src='https://www.designpieces.com/wp-content/uploads/2016/02/google-play-badge.png'/>
                        </a>
                    </div>
                    <div class="col-6 text-left">
                        <a target="_blank" href="https://itunes.apple.com/us/app/authy/id494168017">
                            <img alt="Authy na App Store" style="width: 200px" src="http://tapsmart.wpengine.netdna-cdn.com/wp-content/uploads/2014/04/Download_on_the_App_Store_Badge_US-UK_135x40_0824.png">
                        </a>
                    </div>
                </div>
            </div>
        </form>
	</div>
</div>

<div class="modal fade" bsModal #keyModal="bs-modal" tabindex="-1" [config]="{backdrop: 'static'}">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title pull-left">Obrigado por se registrar!</h4>
			</div>
			<div class="modal-body">
                <h5>Essa é sua Chave Pública.</h5>
                <h6>Guarde-a bem, pois ela é necessária para efetuar o login.</h6>
                <div class="text-center">
                    <img id="qrcode" [src]="user.pubkeyurl">
        		</div>
                <p>Caso não tenha acesso a um leitor de QR Code, copie a chave abaixo:</p>
                <div class="text-center">
                    <samp>{{user.pubkey}}</samp>
                </div>
                <div class="text-center pt-3">
                    <button class="btn btn-primary" (click)="keyModal.hide(); router.navigate(['/']);">Continuar</button>
                </div>
			</div>
		</div>
	</div>
</div>
